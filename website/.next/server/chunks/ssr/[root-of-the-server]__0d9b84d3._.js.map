{"version":3,"sources":["../../../../../website/components/Sidebar.tsx/__nextjs-internal-proxy.mjs","../../../../../website/lib/utils.ts","../../../../../node_modules/.pnpm/%40swc%2Bhelpers%400.5.15/node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../../website/app/animals/page.tsx","../../../../../website/lib/animals.ts"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/website/components/Sidebar.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/website/components/Sidebar.tsx\",\n    \"default\",\n);\n","/**\n * Converts a string to sentence case (first letter capitalized, rest lowercase)\n */\nexport function toSentenceCase(text: string): string {\n  if (!text) return text;\n  \n  // Trim and convert to lowercase, then capitalize first letter\n  const trimmed = text.trim();\n  if (trimmed.length === 0) return text;\n  \n  return trimmed.charAt(0).toUpperCase() + trimmed.slice(1).toLowerCase();\n}\n\n/**\n * Supported file types for different content categories\n */\nexport enum FileType {\n  JPG = 'jpg',\n  JPEG = 'jpeg',\n  PNG = 'png',\n  GIF = 'gif',\n  WEBP = 'webp',\n  MP4 = 'mp4',\n  MOV = 'mov',\n  PDF = 'pdf',\n}\n\n/**\n * Checks if a file or blob pathname matches one of the provided file types\n * @param filename - The filename or blob pathname to check\n * @param allowedTypes - Array of FileType enums to check against\n * @returns true if the file extension matches one of the allowed types\n */\nexport function isValidFileType(filename: string, allowedTypes: FileType[]): boolean {\n  if (!filename || allowedTypes.length === 0) {\n    return false;\n  }\n\n  // Extract file extension (handle both regular filenames and blob pathnames)\n  const extension = filename\n    .split('.')\n    .pop()\n    ?.toLowerCase()\n    .trim();\n\n  if (!extension) {\n    return false;\n  }\n\n  return allowedTypes.some(type => type.toLowerCase() === extension);\n}\n","\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","import Sidebar from '@/components/Sidebar';\nimport { getAllAnimalPhotos } from '@/lib/animals';\nimport Image from 'next/image';\nimport PhotoLink from '@/components/PhotoLink';\n\n// Force dynamic rendering to ensure blob storage API calls work at runtime\nexport const dynamic = 'force-dynamic';\n\nfunction formatDate(dateString: string): string {\n  try {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n    });\n  } catch {\n    return dateString;\n  }\n}\n\nexport default async function AnimalsPage() {\n  const photos = await getAllAnimalPhotos();\n\n  return (\n    <div className=\"min-h-screen bg-[#F7FAFC]\">\n      <div className=\"flex flex-col md:flex-row pt-[60px] md:pt-0 w-full\">\n        <Sidebar />\n        \n        {/* Main Content */}\n        <main className=\"flex-1 min-w-0 px-4 md:px-8 py-8\">\n          <div className=\"max-w-6xl mx-auto\">\n            <header className=\"mb-8 flex justify-end\">\n              <div className=\"text-right\">\n                <div className=\"text-base text-[#4A5568]\">Nishant Iyengar</div>\n                <div className=\"text-sm text-[#718096] mt-1\">iyengar.nish@gmail.com</div>\n              </div>\n            </header>\n\n            {/* Simple Gallery Grid - No Sections */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {photos.map((photo, index) => {\n              // Create a safe ID from filename (remove extension, replace special chars)\n              const photoId = `animals-${photo.filename.replace(/\\.[^/.]+$/, '').replace(/[^a-z0-9]/gi, '-').toLowerCase()}`;\n              return (\n                <PhotoLink\n                  key={index}\n                  id={photoId}\n                  className=\"group relative overflow-hidden rounded-lg bg-white cursor-pointer transition-transform duration-300 hover:scale-105 shadow-sm\"\n                >\n                  <div className=\"relative aspect-square w-full\">\n                    <Image\n                      src={photo.src}\n                      alt={photo.alt || photo.caption || 'Animal photo'}\n                      fill\n                      className=\"object-cover\"\n                      sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                    />\n                    <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300\" />\n                  </div>\n                  {(photo.date || photo.caption) && (\n                    <div className=\"p-3 bg-white\">\n                      <p className=\"text-sm text-[#718096]\">\n                        {photo.date && (\n                          <span className=\"font-medium\">{formatDate(photo.date)}</span>\n                        )}\n                        {photo.caption && (\n                          <span className={photo.date ? \"ml-2\" : \"\"}>{photo.caption}</span>\n                        )}\n                      </p>\n                    </div>\n                  )}\n                </PhotoLink>\n              );\n            })}\n            </div>\n\n            {photos.length === 0 && (\n              <div className=\"text-center py-12\">\n                <p className=\"text-[#718096]\">No photos yet. Add photos to the content/animals directory.</p>\n              </div>\n            )}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n","import fs from 'fs';\nimport path from 'path';\nimport { list } from '@vercel/blob';\nimport { isValidFileType, FileType } from './utils';\n\nconst animalsMetadataDirectory = path.join(process.cwd(), 'content/animals');\n\n// Animals only supports jpg/jpeg and png\nconst ANIMALS_ALLOWED_FILE_TYPES = [FileType.JPG, FileType.JPEG, FileType.PNG];\n\nexport interface AnimalPhotoMetadata {\n  filename: string;\n  date?: string; // Optional: photo date (ISO format: YYYY-MM-DD)\n  caption?: string;\n  alt?: string;\n}\n\nexport interface AnimalPhoto extends AnimalPhotoMetadata {\n  src: string;\n}\n\nexport async function getAllAnimalPhotos(): Promise<AnimalPhoto[]> {\n  try {\n    // Check if metadata directory exists\n    if (!fs.existsSync(animalsMetadataDirectory)) {\n      console.warn('Animals metadata directory does not exist');\n      return [];\n    }\n\n    const files = fs.readdirSync(animalsMetadataDirectory);\n    const photos: AnimalPhoto[] = [];\n\n    // Get all blobs in the animals/ folder\n    // Check if BLOB_READ_WRITE_TOKEN is available\n    if (!process.env.BLOB_READ_WRITE_TOKEN) {\n      console.error('BLOB_READ_WRITE_TOKEN environment variable is not set');\n      return [];\n    }\n\n    let blobs;\n    try {\n      const result = await list({ prefix: 'animals/' });\n      blobs = result.blobs;\n    } catch (error) {\n      console.error('Error fetching blobs from Vercel Blob Storage:', error);\n      return [];\n    }\n\n    for (const file of files) {\n      if (file.endsWith('.json')) {\n        const filePath = path.join(animalsMetadataDirectory, file);\n        const fileContents = fs.readFileSync(filePath, 'utf8');\n        const metadata: AnimalPhotoMetadata = JSON.parse(fileContents);\n        \n        // Validate required fields\n        if (!metadata.filename) {\n          console.warn(`Animal photo ${file} is missing required 'filename' property`);\n          continue;\n        }\n        \n        // Validate file type\n        if (!isValidFileType(metadata.filename, ANIMALS_ALLOWED_FILE_TYPES)) {\n          console.warn(`Animal photo ${metadata.filename} has unsupported file type. Only jpg, jpeg, and png are allowed.`);\n          continue;\n        }\n        \n        // Find the blob that matches the filename\n        // The blob pathname should end with the filename (may have timestamp prefix)\n        const matchingBlobs = blobs.filter(blob => {\n          const blobMatches = blob.pathname.endsWith(metadata.filename) || \n                             blob.pathname === `animals/${metadata.filename}`;\n          \n          // Also validate the blob's file type\n          return blobMatches && isValidFileType(blob.pathname, ANIMALS_ALLOWED_FILE_TYPES);\n        });\n        \n        if (matchingBlobs.length === 0) {\n          console.warn(`Animal photo ${metadata.filename} not found in blob storage`);\n          continue;\n        }\n        \n        // If multiple matches (e.g., different timestamps), use the most recent one\n        const matchingBlob = matchingBlobs.sort((a, b) => \n          new Date(b.uploadedAt).getTime() - new Date(a.uploadedAt).getTime()\n        )[0];\n        \n        photos.push({\n          ...metadata,\n          src: matchingBlob.url,\n        });\n      }\n    }\n\n    return photos;\n  } catch (error) {\n    // Directory doesn't exist yet or error reading, return empty array\n    console.error('Error fetching Animal photos:', error);\n    return [];\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0,2]}