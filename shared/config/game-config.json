{
  "game": {
    "tank": {
      "size": 24,
      "collisionSize": 10,
      "speed": 1.4,
      "rotationSpeed": 5,
      "lives": 3,
      "spawnOffset": 2
    },
    "bullet": {
      "speedMultiplier": 1.8,
      "maxPerTank": 5,
      "maxAge": 7000,
      "fadeDuration": 500,
      "radius": 2,
      "collisionSize": 3
    },
    "timing": {
      "tickRate": 72,
      "shootingCooldown": 150
    },
    "sun": {
      "gravitationalConstant": 0.25,
      "mass": 120.0,
      "influenceRadius": 60,
      "minDistance": 2
    },
    "spawn": {
      "padding": 8,
      "maxAttempts": 100,
      "minDistance": 50
    },
    "collision": {
      "epsilon": 0.001,
      "bulletMinVelocity": 0.5
    },
    "map": {
      "width": 480,
      "height": 360
    }
  },
  "rl": {
    "reward": {
      "timeoutPenalty": -50,
      "maxEpisodeTimeMs": 60000,
      "survivalRewardPerTick": 0.02,
      "hitEnemyReward": 500,
      "gotHitPenalty": -50,
      "winReward": 200,
      "lossPenalty": -50,
      "optimalDistanceToEnemy": 120,
      "inactivityThresholdMs": 1500,
      "significantMovementThreshold": 5,
      "aggressionCheckIntervalMs": 2000,
      "dodgeRewardPerBullet": 15,
      "shootAttemptReward": 25,
      "closingDistanceRewardMultiplier": 0.1,
      "recentBulletThresholdMs": 100,
      "positionHistorySize": 10,
      "positionRepeatThreshold": 30,
      "threatDistance": 50,
      "bulletMatchDistance": 10,
      "movementAwayThreshold": 10,
      "shotAccuracyMaxDistance": 50,
      "movementRewardMax": 1.0,
      "movementRewardMultiplier": 0.01,
      "stagnationPenalty": -0.1,
      "stalematePenalty": -0.2,
      "repetitiveActionPenalty": -0.03,
      "positionDiversityReward": 0.1,
      "lifeAdvantageReward": 5.0,
      "inactivityBasePenalty": -0.3,
      "inactivityMaxPenalty": -0.5,
      "inactivityScalingFactor": 0.1,
      "lackOfAggressionPenalty": -10,
      "barrierCollisionPenalty": -5,
      "chasingReward": 0.5,
      "mapCoverageReward": 0.02
    },
    "observation": {
      "maxBullets": 20,
      "maxSuns": 10,
      "barrierDirections": 8,
      "bulletFeatures": 5,
      "sunFeatures": 3,
      "size": 152
    },
    "action": {
      "numDiscreteActions": 14,
      "actions": [
        {
          "id": 0,
          "name": "NO_ACTION",
          "description": "Do nothing"
        },
        {
          "id": 1,
          "name": "ROTATE_LEFT",
          "description": "Rotate tank left only"
        },
        {
          "id": 2,
          "name": "ROTATE_RIGHT",
          "description": "Rotate tank right only"
        },
        {
          "id": 3,
          "name": "MOVE_FORWARD",
          "description": "Move tank forward only"
        },
        {
          "id": 4,
          "name": "MOVE_BACKWARD",
          "description": "Move tank backward only"
        },
        {
          "id": 5,
          "name": "SHOOT",
          "description": "Shoot only"
        },
        {
          "id": 6,
          "name": "ROTATE_LEFT_FORWARD",
          "description": "Rotate left while moving forward"
        },
        {
          "id": 7,
          "name": "ROTATE_RIGHT_FORWARD",
          "description": "Rotate right while moving forward"
        },
        {
          "id": 8,
          "name": "ROTATE_LEFT_SHOOT",
          "description": "Rotate left while shooting"
        },
        {
          "id": 9,
          "name": "ROTATE_RIGHT_SHOOT",
          "description": "Rotate right while shooting"
        },
        {
          "id": 10,
          "name": "MOVE_FORWARD_SHOOT",
          "description": "Move forward while shooting"
        },
        {
          "id": 11,
          "name": "MOVE_BACKWARD_SHOOT",
          "description": "Move backward while shooting"
        },
        {
          "id": 12,
          "name": "ROTATE_LEFT_BACKWARD",
          "description": "Rotate left while moving backward"
        },
        {
          "id": 13,
          "name": "ROTATE_RIGHT_BACKWARD",
          "description": "Rotate right while moving backward"
        }
      ]
    },
    "dqn": {
      "observationSize": 152,
      "actionSize": 14,
      "learningRate": 0.0005,
      "hiddenLayers": [128, 128, 64],
      "gamma": 0.99,
      "epsilonStart": 1.0,
      "epsilonEnd": 0.05,
      "epsilonDecay": 0.998,
      "batchSize": 64,
      "replayBufferSize": 10000,
      "targetUpdateFrequency": 100
    },
    "training": {
      "simulationsPerBatch": 5,
      "speedMultiplier": 1,
      "saveIntervalMinutes": 5
    }
  },
  "model": {
    "architecture": {
      "inputSize": 152,
      "hiddenLayers": [128, 128, 64],
      "outputSize": 14,
      "activation": "relu",
      "outputActivation": "linear"
    },
    "weights": {
      "format": "array",
      "structure": [
        {
          "layer": 0,
          "type": "dense",
          "weights": "inputSize x hiddenLayers[0]",
          "biases": "hiddenLayers[0]"
        },
        {
          "layer": 1,
          "type": "dense",
          "weights": "hiddenLayers[0] x hiddenLayers[1]",
          "biases": "hiddenLayers[1]"
        },
        {
          "layer": 2,
          "type": "dense",
          "weights": "hiddenLayers[1] x hiddenLayers[2]",
          "biases": "hiddenLayers[2]"
        },
        {
          "layer": 3,
          "type": "dense",
          "weights": "hiddenLayers[2] x outputSize",
          "biases": "outputSize"
        }
      ]
    }
  }
}

